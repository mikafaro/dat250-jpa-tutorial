# DAT250: Software Technology Experiment Assignment 4 Report

## Introduction

The aim of this experiment is to learn about and understand the Java Persistence Architecture
and Object Relational Mapping.

## Experiment 1: Setup and Tutorial

I immediately ran into trouble from the start trying to build with gradle.
The build failed with an exception:

```Could not create service of type ScriptPluginFactory using BuildScopeServices.createScriptPluginFactory().```

Undoubtedly this is due to Ubuntu having an ancient gradle version in the repos, and so should be a quick fix
with a ppa, but for now it seems to work if I just build the project in Intellij. Will fix this is necessary later.
In the end I could run the skeleton program seemingly without failure.

## Experiment 2

I found the explanations a bit lacking in terms of how this is supposed to work which was a challenge at first.
Initially, due to the wording in the tutorial I thought that the setters were not necessary, but have created them now anyway as
I experienced errors during the tutorial.
Secondly I had to change the collections to Set rather than List.
It took a little bit of time to understand that I had to change the persistence.xml to persist
the classes in the model, as I thought this was set up beforehand.

## Database Inspection

I used the database tool in Intellij to view the H2 database file that the program writes to.
There I could view the different tables created. It is interesting that there are two tables
just for connecting the customers to credit cards and customers to addresses. that is perhaps the
most unexpected thing here, although not that unexpected when you know how SQL works.

To see how the SQL query I changed the show_sql property in persistence.xml and ran the program again.
The sql to create the customer table was then shown:

```sql
Hibernate: 
    create table Customer (
        id bigint generated by default as identity,
        name varchar(255),
        primary key (id)
    )
```

## Pending Issues

There are no real pending issues. I believe the data has been persisted properly and
I have been able to view the database tables and queries to the database.